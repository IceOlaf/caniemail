<div class="caniemail-block">
	<h1 class="caniemail-list-title">Client scores</h1>
	{% comment %}
		Client scores.
		Building an array of the global score pour each client family.
	{% endcomment %}
	{% assign client-scores-families = "" | split: '' %}
	{% assign client-scores-y = "" | split: '' %}
	{% assign client-scores-a = "" | split: '' %}
	{% assign client-scores-n = "" | split: '' %}
	{% assign client-scores-u = "" | split: '' %}
	{% comment %}
		1. We go through each existing feature.
	{% endcomment %}
	{% for feature in site.features limit:3 %}
		{% assign feature-stats = feature.stats %}
		{% comment %}
			2. We go through each family of the current feature.
		{% endcomment %}
		{% for family in feature.stats %}
			{% assign family-key = family | first %}
			{% assign family-values = feature.stats[family-key] %}
			{% assign family-index = 0 %}
			{% comment %}
				3. We add the family to the `client-scores-families` array if it doesn't exist yet.
			{% endcomment %}
			{% unless client-scores-families contains family-key %}
				{% assign client-scores-families = client-scores-families | push: family-key %}
				{% assign client-scores-y = client-scores-y | push: 0 %}
				{% assign client-scores-a = client-scores-a | push: 0 %}
				{% assign client-scores-n = client-scores-n | push: 0 %}
				{% assign client-scores-u = client-scores-u | push: 0 %}
				{% assign family-index = client-scores-families.size | minus: 1 %}
			{% endunless %}
			{% comment %}
				4. We go through each platform of the current family and
				keep track of the support value for the most recent version.
			{% endcomment %}
			{% for platform in family-values %}
				{% assign platform-key = platform | first %}
				{% assign platform-values = platform | last %}
				{% for version in platform-values %}
					{% if forloop.last == true %}
						{% assign version-key = version | first %}
						{% assign version-values = version | last | split: ' ' | first %}
						{% case version-values %}
							{% when 'y' %}
								{% assign client-scores-y[family-index] = client-scores-y[family-index] | plus:1 %}
							{% when 'a' %}
								{% assign client-scores-a[family-index] = client-scores-a[family-index] | plus:1 %}
							{% when 'n' %}
								{% assign client-scores-n[family-index] = client-scores-n[family-index] | plus:1 %}
							{% when 'u' %}
								{% assign client-scores-u[family-index] = client-scores-u[family-index] | plus:1 %}
						{% endcase %}
					{% endif %}
				{% endfor %}
			{% endfor %}
		{% endfor %}
	{% endfor %}
	<br />
	{{ client-scores-families | inspect }}<br />
	{% assign client-scores-y = "0,0,6,0,0,0,0,0,0" | split:',' %}
	{{ client-scores-y | inspect }}<br />
	{{ client-scores-y[2] | inspect }}<br />
	{{ client-scores-a | inspect }}<br />
	{{ client-scores-n | inspect }}<br />
	{{ client-scores-u | inspect }}<br />
	<ul class="caniemail-list">
		<li>Foobar</li>
	</ul>
</div>
<!--
# Pour chaque feature:
# - Pour chaque famille:
# -- Si la famille n'existe pas, on l'ajoute à un tableau global.
# -- Pour chaque plateforme, on regarde la valeur la plus récente.
# -- On ajoute ça a un compteur pour les 4 valeurs possibles (y, a, n, u)
-->